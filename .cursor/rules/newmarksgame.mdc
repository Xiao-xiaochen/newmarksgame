---
description: 
globs: 
alwaysApply: false
---



新马列文游戏追求极致的模块化，一条指令一个文件，以下是项目结构：
游戏的基本机制：

1.游戏里的一天指的是现实里1小时，整点时时间刷新，0点到（早上）6点游戏暂停，防止玩家之间战争偷袭【是否可调整为0点到（早上）6点禁止战争功能？】

2.所有生产单位，若劳动力未分配满，则无法生产。每个农业、轻工业、建筑业需要1万人。每个矿业(矿场)、冶金业、军事工业需要2万人。每个电厂需要2000人

3.所有工业中，只有农业，轻工业，采矿业（资源产业）和水电厂能分配劳动力，实现每小时自动生产出生活消费品和粮食和矿，其他的都不行

4.在一个群注册一个地区时，这个群每有1个群员就获得1万人口，5个建筑位。一个群至少得有40人才能勘探资源。在玩家第一次使用“查看地区”，自动注册这个地区，才能使用和地区相关的其它指令。地区注册时，生成小于至少能养活所注册群人口的工厂或农田数的初始工厂和农田数

5.地区生产的东西，会自动存到地区仓库里

玩家系统:
（如果是新用户注册发送）玩家：阅读报告
机器人：
欢迎游玩新马列文游
===[新马列文游]===
用户名 同志：
获得物资：
■人口：30万
■基础设施：50
■建筑部门：3
■轻工厂：8
■农田：10
■粮食：10

注释：
这算是注册指令，每个玩家开局获得

玩家：我的全部资料
机器人：
=====[全部资料]=====
□地区人口：30万
□基础设施：30/50
□第一产业数量：10
□第二产业数量：11

国家系统：
玩家：组建国家 名字
机器人：
======[国家]=====
用户名 组建成功
■邀请格式：邀请加入国家@指定玩家

玩家：我的国家（或者其他人发：他的国家@指定玩家）
=====[ 国家]=====
用户名所在国家：名字
■
■国家总军队：9756
■国家总工业:

建造业
建筑表，将详细介绍都有哪些建筑：
1. 农田
用途：生产粮食，保障人口稳定，粮食不足就等死吧
建造消耗：劳动力×1000人，建筑位×1
日产出：粮食×3单位
详细指令：

劳动力分配	分配劳动力 农业 [数量]	锁定劳动力用于农业生产
农田分配	分配农田 [作物类型] [数量]	切换空闲农田的作物类型
状态查询	阅读地区农业报告	查看实时产出与农田分布
资源产业（矿业）和第二产业：
2. 建筑部门
用途：解锁建筑（农田除外）。
建造消耗：劳动力×10,000人
2.1. 铁矿井
用途：开采铁矿，用于炼钢和军工。
建造消耗：钢铁×50吨，建筑部门1个，建筑位×1。
日产出：铁矿×100吨（需要消耗铁矿储量）。
定位：冶金业的基础，优先在铁矿丰富地区建造。

3. 油井
4. 煤矿厂
5. 稀土矿场
5.1.稀有金属矿场

6. 炼钢厂
用途：将铁矿炼制成钢铁，用于建造和军工。
建造消耗：劳动力×3000人，建筑位×2。
日产出：暂定。
策略定位：工业链核心，但资源消耗极大。
7. 火电站
用途：燃煤发电，支持工业和军事需求。
建造消耗：钢铁×300吨，劳动力×2000人，建筑位×1。
日耗资源：煤矿×375吨。
发电量：500MW。
策略定位：短期快速供电
8. 水电站
用途：水力发电，无资源消耗。
建造消耗：钢铁×1000吨，劳动力×3000人，建筑位×1。
发电量：1000MW。
地形要求：需河流地形
9. 军工厂
用途：生产坦克、火炮等军备，提升军事实力。
建造消耗：钢铁×200吨，劳动力×1000人，建筑位×1。
电力需求：50MW/座。
1.机械厂


玩家：地区建造 水电站 1
机器人：
=====[土木工程]=====
建造失败：
■没有水利工程

注释：
1.建造水电站需要建造水利工程，建造水利工程需要地区河流大于10%


玩家：地区建造 水电站 1
机器人：
=====[土木工程]=====
建造失败：



地区系统：

（在一个群中）玩家：查看地区
机器人：
=====[地区信息]=====
■控制方：晓基地
■领导人：3071303571
□地区人口：67万
□基础设施：30/86
□地区仓库：14000
□第一产业数量：20
□第二产业数量：10
■地区驻军：3万

解释：
1.控制方就是控制这个地区的国家
2.基础设施是最大建筑位的另一种说法，30/86意思是86的建筑位用了30
3.玩家在一个群发送查看地区时，自动为这个群注册一个地区，随机生成地形特质（注：森林是可以覆盖在除了河流以外的地形上面的）


玩家：查看地区特质
机器人：
=====[地区特质]=====
■建筑位：86
■地形特质：
□山地：30%
□丘陵：10%
□平原：50%
□河流：10%
□森林覆盖率：40%

解释：
6.每个地区的最大建筑位由这个群的人数决定，一个人能给5个建筑位，比如40人群就是200建筑位
7.但是实际建筑位会受到地形影响，30%的山地就是200建筑位乘以30%在乘以50%的山地损耗率，得到数字30，以此类推，丘陵损耗率是30%，平原是0%，那么144就是地形影响后的建筑位，但是还没完，还有40%森林覆盖率，144乘以60%得到86.4建筑位，取86（四舍五入）
注意：
以下的军事信息必须有情报部门在地方的情报网强度达标才能查看，或者在不被击落的情况下使用侦察机或预警机侦查查看

玩家：查看地区军事基地
机器人：
[地区军事基地信息]
□控制方：晓基地
■领导人：307130357
□驻军：30000
□公路：100%
□军事仓库：100%
□要塞：10级
□雷达：100%
□防空阵地：100%

玩家：查看地区军事仓库
机器人：
[军事仓库信息]
□步兵装备：1000
□坦克：10

注释 ：

地区矿业系统：
玩家：开采煤矿 3
机器人：@ALL FOR IT @ALL FOR IT 
=====[矿业]=====
开采成功！
■煤矿：100 (+100)
■空闲劳动力：14万(-6万)
■空闲煤矿厂：0(-3)

农业系统：

玩家：查看地区第一产业
机器人：
===[地区第一产业信息]===
■农田：20
■固定劳动力：1万
■空闲农田：2
■作物类型：
□橡胶作物：18

注释：
1.有两种作物，一种是粮食作物，一种是橡胶作物，能产出橡胶

玩家：分配劳动力 农业 190000
机器人：
===[地区第一产业]===
分配成功！
■农田：20
■空闲劳动力：0(-19万)
■固定劳动力：20万(+19万)

玩家：取消分配劳动力 农业 90000
机器人：
===[地区第一产业]===
分配成功！
■固定劳动力：11万-(9万)
■空闲劳动力：9万(+9万)

解释：(属于是再解释一遍了)
固定的劳动力会在每小时自动生产
空闲的劳动力可以由玩家自由分配

玩家：分配农田 橡胶作物 2
机器人：
===[地区第一产业信息]===
分配成功！
■空闲农田：0(-2)
■作物类型：
□粮食作物：18
□橡胶作物：2

解释：
这里的空闲农田是未种植作物的，城市的控制方国家的领导人或地区的领导人可以选择把他们分配到粮食作物

以下是一种可能的情况
玩家：分配农田 橡胶作物 2
机器人：
===[地区第一产业信息]===
分配失败！
■空闲农田：0

玩家：取消分配农田 粮食作物 2
机器人：
===[地区第一产业信息]===
取消分配成功！
■空闲农田：0(+2)
■粮食作物：18(-2)

玩家：取消分配农田 橡胶作物 2
机器人：
===[地区第一产业信息]===
取消分配成功！
■空闲农田：0(+2)
■橡胶作物：2(-2)

玩家：取消分配农田 粮食作物 2
机器人：
===[地区第一产业信息]===
取消分配失败！
■粮食作物：0

玩家：取消分配农田 橡胶作物 2
机器人：
===[地区第一产业信息]===
取消分配失败！
■橡胶作物：0

玩家：阅读地区农业报告
机器人：
===[地区农业报告]===
■农田：20
□粮食产出：54
□橡胶产出：2

解释：
3.一个粮食作物农田，能产出3个单位的粮食，一个橡胶田能产出1单位橡胶（有待商议）
4.若是分配给农田的劳动力不足，则劳动力优先用于粮食产出


玩家：查看地区第二产业
机器人：
[地区第二产业信息]
■轻工业：2
■建筑业：3
■重工业：4
■军工业：1

注释：
1.生活消费品和粮食这种每小时可以自动生产的物品，可以盈余，盈余的物品储存到地区仓库
2.轻工厂游戏里每天（即为现实里一小时），能产出四单位生活消费品

玩家：查看地区人口
机器人：
===[地区人口]===
■地区人口：67万
■劳动人口：40万
□人口变化：+1%/天
■民生需求：
□粮食: 67
□生活消费品：34
解释：
1.群人数每有1个人，地区初始人口+1万，劳动力人口是地区人口的基础值为60%
2.粮食需求（游戏里的每天）= 1单位/万人
3.生活消费品（游戏里的每天）=0.5单位/万人
4.这里67万人口 ，应需要的生活消费品是33.5单位，但是四舍五入为34单位

人口机制：
2.基础（游戏里的）天增长率：0.5%
3.游戏里每天刚开始时，自动扣除应消耗的生活消费品和粮食，完全供应时无修正，若是生活消费品和粮食不足，则给予一定惩罚。扣除资源后实现人口运算
4.粮食供给率80%到100%时无修正，50%到80%时-1%人口，小于50%时减2%人口。
5.特别机制：粮食供应率小于百分之80后忽略生活消费品给予的正人口修正
6.生活消费品供应率80%到100%时+1%人口，50%到80%时加0.5%人口，30%到50%时无修正，小于30%时-0.5%人口

玩家：查看地区劳动力
机器人：
=====[地区劳动力]=====
■总劳动力：39万人
■繁忙劳动力：19万人
■空闲劳动力：10万人
■固定劳动力：10万人

玩家：勘探地区资源储量 或（查看地区资源储量）
机器人：
===[地区资源储量]===
资源单位：（吨）
■稀土资源：79200
■稀有金属：33600
■铁矿：1,84400
■煤矿：3,22500
■原油：1,08000

采用三角分布算法基础储量基准表（单位：吨）
铁矿(30000, 80000, 150000)
煤矿(50000, 120000, 250000)
铝矿(0, 30000, 100000)
稀土(0, 15000, 30000)
原油(0, 60000, 100000) 
稀有金属(0,30000, 60000)
所有资源都是整数，最小单位是吨

地区最终资源储量 = 基础储量 × 某个地形占比 × 对应地形修正
把所有地形加一下就行了

地形对资源储量修正系数：
平原：铁矿×1.2 煤矿×0.8
山地：稀土×2.0 铁矿×0.5
丘陵：煤矿×1.5
军事工业
玩家：地区生产 坦克 1
机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■坦克+10
■空闲劳动力：18万(-2万)
■消耗资源：（吨）
□钢铁：500
□稀有金属：200

玩家：地区生产 步兵装备 1
机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■步兵装备+1000
■空闲劳动力：18万(-2万)
■消耗资源：（吨）
□钢铁：3

玩家：地区生产 装甲运兵车 1
机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■装甲运兵车+20
■空闲劳动力：18万(-2万)
■消耗资源：（吨）
□钢铁：500
□稀有金属：200

玩家：地区生产 坦克 1
机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■火炮+10
■空闲劳动力：18万(-2万)
■消耗资源：（吨）
□钢铁：70
□稀有金属：30

机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■军事卡车+30
■消耗资源：（吨）
□钢铁：150
□橡胶：15
□稀有金属：3

玩家：地区生产 反坦克炮 1
机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■反坦克炮+8
■消耗资源：（吨）
□钢铁：64
□稀有资源：4

玩家：地区生产 防空火炮 1
机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■防空炮+6
■消耗资源：（吨）
□钢铁：42
□稀有金属：2

玩家：地区生产 轻型战斗机 1
机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■轻型战斗机+2
■消耗资源：（吨）
□铝：10
□稀有金属：4

玩家：地区生产 重型战斗机 1
机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■重型战斗机+1
■消耗资源：（吨）
□铝：20
□稀有金属：8

玩家：地区生产 战术轰炸机 2
机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■战术轰炸机+1
■消耗资源：（吨）
□铝：30
□稀有金属：10

解释：至少要2个劳动力满编军工厂才能生产一个战术轰炸机，若是不满编，则无法生产

玩家：地区生产 战略轰炸机 10
机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■战略轰炸机+1

■消耗资源：（吨）
□铝：70
□稀有金属：30

解释：
至少要10个劳动力满编军工厂，才能生产一个战略轰炸机

玩家：地区生产 运输机
机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■运输机+1
■消耗资源：（吨）
□铝：40
□稀有金属：20

玩家：地区生产 预警机
机器人：
=====[军事工业]=====
晓筱晨 同志：
■生产成功
■预警机+1
■消耗资源：（吨）
□钢铁：50
□稀有金属：25

上述为新马列文游命令格式

使用中文交流，会Typescript和 koishi
